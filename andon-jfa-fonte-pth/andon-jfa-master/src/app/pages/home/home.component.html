<mat-spinner *ngIf="init == false"></mat-spinner>
<main class="container">
  <main class="parent" *ngIf="init">
    <div class="div1" (click)="openDialog()">
      <!-- <img src="assets\download-removebg-preview.png" alt="logo"> -->
      <svg 
        xmlns="http://www.w3.org/2000/svg"
        xml:space="preserve"
        width="73.0255mm"
        height="24.4668mm"
        version="1.1"
        style="
          shape-rendering: geometricPrecision;
          text-rendering: geometricPrecision;
          image-rendering: optimizeQuality;
          fill-rule: evenodd;
          clip-rule: evenodd;
        "
        viewBox="0 0 849.82 284.73"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        xmlns:xodm="http://www.corel.com/coreldraw/odm/2003"
      >
        <defs>
          <style type="text/css">
            .fil0 {
              fill: #fefefe;
            }
            .fil1 {
              fill: #00afef;
            }
          </style>
        </defs>
        <g id="Camada_x0020_1">
          <metadata id="CorelCorpID_0Corel-Layer" />
          <g id="_2872939372416">
            <path
              class="fil0"
              d="M142.36 6.21c-75.19,0 -136.15,60.96 -136.15,136.15 0,75.19 60.96,136.15 136.15,136.15 75.19,0 136.15,-60.96 136.15,-136.15 0,-75.19 -60.96,-136.15 -136.15,-136.15z"
            />
            <path
              class="fil1"
              d="M142.36 86.78c7.01,0 12.7,5.69 12.7,12.7 0,7.01 -5.68,12.7 -12.7,12.7 -7.01,0 -12.7,-5.69 -12.7,-12.7 0,-7.01 5.68,-12.7 12.7,-12.7zm65.55 150.96l0.75 1.34c1.54,2.71 1.49,6.03 -0.12,8.7 -2.44,4.03 -7.77,5.35 -11.8,2.9 -16.56,-10.06 -34.83,-16.64 -54.38,-16.65 -19.55,-0.01 -37.8,6.57 -54.35,16.65 -2.67,1.63 -6.02,1.68 -8.73,0.14 -4.13,-2.34 -5.58,-7.61 -3.24,-11.74l58.76 -103.69c0.78,-1.42 1.91,-2.57 3.31,-3.37 4.13,-2.34 9.4,-0.89 11.74,3.24l58.07 102.48 -0.01 0zm-41.85 -102.35c-3.38,-3.38 -3.38,-8.84 0,-12.22 3.1,-3.1 5.6,-6.77 7.28,-10.83 1.69,-4.08 2.53,-8.46 2.53,-12.86 0,-5.89 -1.52,-11.69 -4.46,-16.79 -2.94,-5.1 -7.2,-9.31 -12.29,-12.26 -4.11,-2.37 -5.51,-7.67 -3.14,-11.77 2.38,-4.11 7.67,-5.51 11.78,-3.14 7.71,4.46 14.11,10.89 18.56,18.61 4.45,7.71 6.83,16.45 6.83,25.35 0,6.65 -1.34,13.25 -3.89,19.4 -2.55,6.16 -6.27,11.79 -10.99,16.51 -3.37,3.37 -8.84,3.37 -12.21,0zm10.19 -94.63c-4.11,-2.38 -5.51,-7.67 -3.14,-11.77 2.38,-4.11 7.67,-5.51 11.77,-3.14 12.92,7.47 23.64,18.22 31.1,31.15 7.46,12.92 11.42,27.56 11.42,42.49 0,11.15 -2.23,22.21 -6.5,32.51 -4.27,10.32 -10.54,19.73 -18.46,27.62 -3.37,3.36 -8.82,3.33 -12.17,-0.04 -3.36,-3.37 -3.33,-8.82 0.03,-12.17 6.28,-6.27 11.28,-13.75 14.68,-21.95 3.41,-8.23 5.14,-17.07 5.14,-25.97 0,-11.91 -3.1,-23.61 -9.06,-33.93 -5.95,-10.31 -14.53,-18.84 -24.83,-24.79zm-59.28 14.76c4.1,-2.37 9.39,-0.97 11.77,3.14 2.38,4.1 0.97,9.4 -3.14,11.77 -5.09,2.95 -9.34,7.16 -12.29,12.26 -2.94,5.11 -4.46,10.9 -4.46,16.79 0,4.41 0.84,8.79 2.53,12.86 1.68,4.06 4.18,7.73 7.28,10.83 3.37,3.37 3.37,8.84 0,12.22 -3.37,3.37 -8.84,3.37 -12.21,0 -4.72,-4.72 -8.44,-10.35 -10.99,-16.51 -2.55,-6.15 -3.89,-12.74 -3.89,-19.4 0,-8.91 2.38,-17.65 6.83,-25.35 4.45,-7.72 10.85,-14.14 18.56,-18.61zm-17.14 -29.67c4.11,-2.37 9.4,-0.97 11.78,3.14 2.38,4.1 0.97,9.39 -3.14,11.77 -10.3,5.95 -18.88,14.49 -24.83,24.8 -5.95,10.32 -9.05,22.02 -9.05,33.93 0,8.9 1.73,17.75 5.14,25.97 3.4,8.2 8.39,15.68 14.67,21.95 3.37,3.36 3.39,8.8 0.04,12.17 -3.35,3.37 -8.81,3.4 -12.17,0.04 -7.91,-7.89 -14.18,-17.31 -18.46,-27.62 -4.26,-10.3 -6.49,-21.36 -6.49,-32.51 0,-14.92 3.96,-29.56 11.42,-42.49 7.46,-12.93 18.18,-23.68 31.1,-31.15zm4.82 197.65l3.68 -1.19c11.01,-3.57 22.44,-5.49 34.02,-5.48 11.6,0.01 23.03,1.95 34.05,5.53l3.69 1.2 -37.74 -66.59 -37.71 66.54zm37.71 -223.5c-78.62,0 -142.36,63.74 -142.36,142.36 0,78.63 63.74,142.36 142.36,142.36 78.63,0 142.37,-63.74 142.37,-142.36 0,-78.63 -63.74,-142.36 -142.37,-142.36z"
            />
            <path
              class="fil0"
              d="M554.18 219.74l0 -56.79 75.79 0 19.22 -45.76 -95.01 0 0 -2.93c0,-15.03 12.3,-27.33 27.33,-27.33l80.6 0 19.24 -45.77 -99.84 0c-40.2,0 -73.09,32.91 -73.09,73.1l0 129.3 45.76 0 0 -23.82z"
            />
            <path
              class="fil0"
              d="M470.76 41.16l-26.53 0 -19.23 45.76 0 83.54c0,15.03 -12.31,27.33 -27.34,27.33l-80.6 0 -19.22 45.76 99.83 0c40.21,0 73.1,-32.89 73.1,-73.09l0 -129.3z"
            />
            <path
              class="fil0"
              d="M679.74 243.56l18.85 -44.86c28.87,0 57.74,0 86.61,0l18.86 44.86 45.76 0 -85.04 -202.39 -45.76 0 -85.04 202.39 45.76 0zm38.08 -90.63l24.08 -57.31 24.08 57.31c-16.05,0 -32.1,0 -48.15,0z"
            />
          </g>
        </g>
      </svg>
    </div>
    <div class="div2 simple-div">
      <h1>OP</h1>
      <div>
        <span>{{op}}</span>
      </div>
    </div>
    <div class="div3 simple-div">
      <h1>DATA</h1>
      <div>
        <span>{{ dataAtual | date : "dd/MM/YYYY" }}</span>
      </div>
    </div>
    <div class="div4 simple-div">
      <h1>PRODUTO</h1>
      <div>
        <span>PTH {{ modeloAtual.modelo }}</span>
      </div>
    </div>
    <div class="div5 simple-div">
      <h1>PROGRAMAÇÃO DO DIA</h1>
      <div>
        <span>{{ imposto | number : "1.0-0" }} und.</span>
      </div>
    </div>
    <div class="div6 simple-div">
      <h1>CICLO</h1>
      <div>
        <span
          >{{ TCimpostado | number : "1.0-0" }}
          <p>s</p></span
        >
      </div>
    </div>
    <div class="div7 complicated-div">
      <h1>STATUS DA PRODUÇÃO GERAL</h1>
      <div>
        <div>
          <span>PLANEJADO</span>
          <span class="green">{{ previsto | number : "1.0-0" }}</span>
        </div>
        <div>
          <span>REALIZADO</span>
          <span [ngClass]="{
            green: realizado >= previsto,
            red: realizado < previsto
          }">{{ realizado | number : "1.0-0" }}</span>
        </div>
        <div>
          <span>DIFERENÇA</span>
          <span
            [ngClass]="{
              green: 0 <= realizado - previsto,
              red: 0 > realizado - previsto
            }"
            >{{ realizado - previsto | number : "1.0-0" }}</span
          >
        </div>
      </div>
    </div>
    <div class="div8 complicated-div">
      <h1>PRODUÇÃO HORÁRIA</h1>
      <div>
        <div>
          <span>PLANEJADO</span>
          <span class="green">{{
            imposto / shiftTime | number : "1.0-0"
          }}</span>
        </div>
        <div>
          <span>REALIZADO</span>
          <span
            [ngClass]="{
              green: realizado / (effectiveTime / 60) >= imposto / shiftTime,
              red: realizado / (effectiveTime / 60) < imposto / shiftTime
            }"
            >{{ realizado / (effectiveTime / 60) | number : "1.0-0" }}</span
          >
        </div>
      </div>
    </div>
    <div class="div9 complicated-div">
      <h1>TEMPO MÉDIO DE CICLO</h1>
      <div>
        <div>
          <span>PLANEJADO</span>
          <span class="green">{{ TCimpostado | number : "1.0-0" }}</span>
        </div>
        <div>
          <span>REALIZADO</span>
          <span
            [ngClass]="{
              green: 3600 / (realizado / (effectiveTime / 60)) <= TCimpostado,
              red: 3600 / (realizado / (effectiveTime / 60)) > TCimpostado
            }"
            >{{
              3600 / (realizado / (effectiveTime / 60)) | number : "1.0-0"
            }}</span
          >
        </div>
      </div>
    </div>
    <div class="div10">
      <h1>QUANTIDADE PRODUZIDA HORA A HORA</h1>
      <div>
        <div>
          <span>8:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas7 >=
                minutos8 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas7 < minutos8 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas7 }}</span
          >
        </div>
        <div>
          <span>9:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas8 >=
                minutos9 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas8 < minutos9 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas8 }}</span
          >
        </div>
        <div>
          <span>10:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas9 >=
                minutos10 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas9 < minutos10 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas9 }}</span
          >
        </div>
        <div>
          <span>11:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas10 >=
                minutos11 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas10 <
                minutos11 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas10 }}</span
          >
        </div>
        <div>
          <span>12:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas11 >=
                minutos12 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas11 <
                minutos12 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas11 }}</span
          >
        </div>
        <div>
          <span>13:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas12 >=
                minutos13 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas12 <
                minutos13 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas12 }}</span
          >
        </div>
        <div>
          <span>14:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas13 >=
                minutos14 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas13 <
                minutos14 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas13 }}</span
          >
        </div>
        <div>
          <span>15:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas14 >=
                minutos15 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas14 <
                minutos15 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas14 }}</span
          >
        </div>
        <div>
          <span>16:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas15 >=
                minutos16 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas15 <
                minutos16 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas15 }}</span
          >
        </div>
        <div>
          <span>17:00</span>
          <span
            [ngClass]="{
              green:
                realizadoHora.horas16 >=
                minutos17 * impostodivididoporshift - 0.5,
              red:
                realizadoHora.horas16 <
                minutos17 * impostodivididoporshift - 0.5
            }"
            >{{ realizadoHora.horas16 }}</span
          >
        </div>
      </div>
    </div>
    <section>
      <div class="col1">
        <div><span>OPERAÇÃO</span></div>
        <div><span>TEMPO DE CICLO ATUAL</span></div>
        <div><span>ÚLTIMO TEMPO DE CICLO</span></div>
        <div><span>PENÚLTIMO TEMPO DE CICLO</span></div>
        <div><span>CICLOS EXCEDIDOS</span></div>
        <div><span>INTERRUPÇÕES</span></div>
        <div><span>REFUGO TOTAL DE PEÇAS</span></div>
        <div><span>TOTAL DE PEÇAS PRODUZIDAS</span></div>
      </div>
      <div class="col2" *ngFor="let item of nodemcu">
        <div>
          <span
            class="op"
            [ngClass]="{
              'unica-1':
                item.nameId.name === '080' || item.nameId.name === '090',
              'unica-2':
                item.nameId.name === '100' || item.nameId.name === '110',
              piscar_azul: item.state === 'piscar_azul',
              piscar: item.state === 'piscar',
              help: item.state === 'help',
              green: item.state === 'verde',
              blue: item.state === 'azul',
              red: item.state !== 'verde' && item.state !== 'azul'
            }"
            ><p>OPE</p>
            {{ item.nameId.name }}</span
          >
        </div>
        <div>
          <span
            [ngClass]="{
              sublime_green:
                item.nameId.name === '110' ||
                item.nameId.name === '100' ||
                item.nameId.name === '080' ||
                item.nameId.name === '090'
                  ? 180 >= item.contador.contadorAtual
                  : TCimpostado >= item.contador.contadorAtual,
              sublime_red:
                item.nameId.name === '110' ||
                item.nameId.name === '100' ||
                item.nameId.name === '080' ||
                item.nameId.name === '090'
                  ? 180 < item.contador.contadorAtual
                  : TCimpostado < item.contador.contadorAtual
            }"
            >{{ item.contador.contadorAtual }}s</span
          >
        </div>
        <div>
          <span
            [ngClass]="{
              sublime_green:
                item.nameId.name === '110' ||
                item.nameId.name === '100' ||
                item.nameId.name === '080' ||
                item.nameId.name === '090'
                  ? 180 >= item.currentTC
                  : TCimpostado >= item.currentTC,
              sublime_red:
                item.nameId.name === '110' ||
                item.nameId.name === '100' ||
                item.nameId.name === '080' ||
                item.nameId.name === '090'
                  ? 180 < item.currentTC
                  : TCimpostado < item.currentTC
            }"
            >{{ item.currentTC }}s</span
          >
        </div>
        <div>
          <span
            [ngClass]="{
              sublime_green:
                item.nameId.name === '160' ||
                item.nameId.name === '170' ||
                item.nameId.name === '180' ||
                item.nameId.name === '190' ||
                item.nameId.name === '200' ||
                item.nameId.name === '210' ||
                item.nameId.name === '220' ||
                item.nameId.name === '230'
                  ? 240 >= item.firtlastTC
                  : TCimpostado >= item.firtlastTC,
              sublime_red:
                item.nameId.name === '160' ||
                item.nameId.name === '170' ||
                item.nameId.name === '180' ||
                item.nameId.name === '190' ||
                item.nameId.name === '200' ||
                item.nameId.name === '210' ||
                item.nameId.name === '220' ||
                item.nameId.name === '230'
                  ? 240 < item.firtlastTC
                  : TCimpostado < item.firtlastTC
            }"
            >{{ item.firtlastTC }}s</span
          >
        </div>
        <div>
          <span>{{ item.qtdeTCexcedido }}</span>
        </div>
        <div>
          <section class="two-items">
            <span>{{ item.analise }}</span>
            <span>{{ item.ajuda }}</span>
          </section>
        </div>
        <div>
          <span>{{ item.maintenance }}</span>
        </div>
        <div>
          <span
          [ngClass]="{
            green:
              item.nameId.name === '160' ||
              item.nameId.name === '170' ||
              item.nameId.name === '180' ||
              item.nameId.name === '190' ||
              item.nameId.name === '200' ||
              item.nameId.name === '210' ||
              item.nameId.name === '220' ||
              item.nameId.name === '230'
                ? item.count >= (previsto / 4)
                : item.count >= previsto,
                red:
                item.nameId.name === '160' ||
                item.nameId.name === '170' ||
                item.nameId.name === '180' ||
                item.nameId.name === '190' ||
                item.nameId.name === '200' ||
                item.nameId.name === '210' ||
                item.nameId.name === '220' ||
                item.nameId.name === '230'
              ? item.count < (previsto / 4)
              : item.count < previsto,
          }"
            >{{ item.count }}</span
          >
        </div>
      </div>
    </section>
  </main>
</main>
